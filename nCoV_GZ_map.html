<!DOCTYPE html>
<html style="height: 100%">
  <head>
    <meta charset="utf-8" />
  </head>
  <body style="height: 100%; margin: 0">
    <div id="container" style="height: 100%"></div>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/echarts-gl/dist/echarts-gl.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/echarts-stat/dist/ecStat.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/echarts/dist/extension/dataTool.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/echarts/map/js/china.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/echarts/map/js/world.js"
    ></script>
    <script
      type="text/javascript"
      src="https://api.map.baidu.com/api?v=2.0&ak=rm0wtMqwBDZ9eTXc569RCYqxpv3q81xD&__ec_v__=20190126"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/echarts/dist/extension/bmap.min.js"
    ></script>
    <script type="text/javascript">
      var dom = document.getElementById("container");
      var myChart = echarts.init(dom);
      var app = {};
      option = null;
      var data = [
        { name: "新雍丽酒店", value: 100 },
        { name: "槽船一街", value: 100 },
        { name: "叠翠峰", value: 100 },
        { name: "榄核镇蔡源小区-东1门", value: 100 },
        { name: "万科南方公元", value: 100 },
        { name: "太平洋花园", value: 100 },
        { name: "尚东阳光", value: 100 },
        { name: "翡翠绿洲", value: 100 },
        { name: "西洲村", value: 100 },
        { name: "西洲豪门公寓", value: 100 },
        { name: "中海城市广场", value: 100 },
        { name: "体育西小区", value: 100 },
        { name: "沙太南路", value: 100 },
        { name: "华明路", value: 100 },
        { name: "珠光御景二期-B区", value: 100 },
        { name: "珠光·新城御景-2期", value: 100 },
        { name: "富力千禧花园", value: 100 },
        { name: "渔兴路", value: 100 },
        { name: "盈彩美居", value: 100 },
        { name: "合景路", value: 100 },
        { name: "新景苑", value: 100 },
        { name: "凯德天河新作新园-西门", value: 100 },
        { name: "万科云城米酷", value: 100 },
        { name: "广州锦顺酒店(天河店)", value: 100 },
        { name: "华景新城陶然庭园", value: 100 },
        { name: "棠雅苑", value: 100 },
        { name: "沙太南路", value: 100 },
        { name: "海景花园", value: 100 },
        { name: "猎德村复建房", value: 100 },
        { name: "珠光·新城御景", value: 100 },
        { name: "暨南大学-羊城苑", value: 100 },
        { name: "广州林南文华酒店(车陂地铁站店)", value: 100 },
        { name: "美好居", value: 100 },
        { name: "和平家园", value: 100 },
        { name: "和平家园", value: 100 },
        { name: "土华村", value: 100 },
        { name: "同福西路", value: 100 },
        { name: "鸡春岗新街", value: 100 },
        { name: "小港路小区", value: 100 },
        { name: "影城花园", value: 100 },
        { name: "广州国际轻纺城", value: 100 },
        { name: "昌岗中路", value: 100 },
        { name: "金恒路", value: 100 },
        { name: "石榴岗路", value: 100 },
        { name: "影城花园", value: 100 },
        { name: "锦江之星(江泰路地铁站店)", value: 100 },
        { name: "船舶太古酒店", value: 100 },
        { name: "白水坑祠堂", value: 100 },
        { name: "广州雅居乐花园", value: 100 },
        { name: "名伦花园", value: 100 },
        { name: "尚东尚筑幼儿园", value: 100 },
        { name: "丽柏国际酒店", value: 100 },
        { name: "星河湾海怡半岛", value: 100 },
        { name: "亚运城媒体村-南门", value: 100 },
        { name: "碧桂园东苑", value: 100 },
        { name: "祈福新村祈福名都", value: 100 },
        { name: "金山谷花园", value: 100 },
        { name: "祈福名都", value: 100 },
        { name: "人和", value: 100 },
        { name: "人和大街", value: 100 },
        { name: "保利·西海岸江岸花园(东南门)", value: 100 },
        { name: "元邦·航空家园", value: 100 },
        { name: "南湖高尔夫俱乐部", value: 100 },
        { name: "南航明珠大酒店", value: 100 },
        { name: "心谊路", value: 100 },
        { name: "时代玫瑰园", value: 100 },
        { name: "同景花园", value: 100 },
        { name: "梅滨大厦", value: 100 },
        { name: "传统风味小笼包", value: 100 },
        { name: "贝丽花园", value: 100 },
        { name: "江高商业步行街", value: 100 },
        { name: "石潭路", value: 100 },
        { name: "保利·西子湾", value: 100 },
        { name: "合和创意园", value: 100 },
        { name: "乐得花园", value: 100 },
        { name: "黄边", value: 100 },
        { name: "长发楼", value: 100 },
        { name: "黄石花园", value: 100 },
        { name: "白云尚城", value: 100 },
        { name: "锦尚·蓬莱", value: 100 },
        { name: "合和新城", value: 100 },
        { name: "合成村", value: 100 },
        { name: "雅宝新城英伦世家", value: 100 },
        { name: "自由人花园", value: 100 },
        { name: "南航花园", value: 100 },
        { name: "长岗村", value: 100 },
        { name: "中海花湾壹号", value: 100 },
        { name: "丽枫酒店(上下九步行街店)", value: 100 },
        { name: "文昌南路", value: 100 },
        { name: "新世界凯粤湾-东门", value: 100 },
        { name: "芦荻街", value: 100 },
        { name: "农林下路", value: 100 },
        { name: "华乐街华侨新村邻里活动中心", value: 100 },
        { name: "金羊花园", value: 100 },
        { name: "水均岗大院", value: 100 },
        { name: "水荫路", value: 100 },
        { name: "万艺国际精品广场", value: 100 },
        { name: "富力御龙庭", value: 100 },
        { name: "淘金路", value: 100 },
        { name: "东风东路", value: 100 },
        { name: "万科金色梦想", value: 100 },
        { name: "中海誉城", value: 100 },
        { name: "亨元花园", value: 100 },
        { name: "蓝玉五街", value: 100 },
        { name: "中鼎·君和名城-西门", value: 100 },
        { name: "保利林语山庄-南门", value: 100 },
        { name: "金碧世纪花园", value: 100 },
        { name: "万科城市花园", value: 100 }
      ];
      var geoCoordMap = {
        新雍丽酒店: [113.583973, 23.561166],
        槽船一街: [113.586973, 22.811423],
        叠翠峰: [113.527343, 22.802977],
        "榄核镇蔡源小区-东1门": [113.3476, 22.837104],
        万科南方公元: [113.508407, 22.811692],
        太平洋花园: [113.584583, 23.123002],
        尚东阳光: [113.580393, 23.108519],
        翡翠绿洲: [113.568098, 23.133676],
        西洲村: [113.587788, 23.10692],
        西洲豪门公寓: [113.585477, 23.113825],
        中海城市广场: [113.831512, 23.29188],
        体育西小区: [113.331613, 23.135989],
        沙太南路: [113.334012, 23.175958],
        华明路: [113.32223, 23.128564],
        "珠光御景二期-B区": [113.355744, 23.122217],
        "珠光·新城御景-2期": [113.356165, 23.123612],
        富力千禧花园: [113.291451, 23.102082],
        渔兴路: [113.384226, 23.219332],
        盈彩美居: [113.424701, 23.120631],
        合景路: [113.416036, 23.162125],
        新景苑: [113.376131, 23.130224],
        "凯德天河新作新园-西门": [113.338577, 23.1414],
        万科云城米酷: [113.41369, 23.173148],
        "广州锦顺酒店(天河店)": [113.381518, 23.137571],
        华景新城陶然庭园: [113.367725, 23.148169],
        棠雅苑: [113.374328, 23.140536],
        沙太南路: [113.334012, 23.175958],
        海景花园: [113.373331, 23.129206],
        猎德村复建房: [113.341831, 23.119317],
        "珠光·新城御景": [113.353306, 23.121829],
        "暨南大学-羊城苑": [113.351928, 23.141549],
        "广州林南文华酒店(车陂地铁站店)": [113.403206, 23.130597],
        美好居: [113.399877, 23.131587],
        和平家园: [113.321247, 23.092704],
        和平家园: [113.321247, 23.092704],
        土华村: [113.360201, 23.075845],
        同福西路: [113.257895, 23.108332],
        鸡春岗新街: [113.271882, 23.084176],
        小港路小区: [113.27662, 23.115388],
        影城花园: [113.325335, 23.101509],
        广州国际轻纺城: [113.304547, 23.094639],
        昌岗中路: [113.279911, 23.094095],
        金恒路: [113.294896, 23.071114],
        石榴岗路: [113.339741, 23.095861],
        影城花园: [113.325335, 23.101509],
        "锦江之星(江泰路地铁站店)": [113.2852, 23.086354],
        船舶太古酒店: [113.261302, 23.095689],
        白水坑祠堂: [113.407066, 22.980173],
        广州雅居乐花园: [113.372354, 23.017195],
        名伦花园: [113.336048, 23.017004],
        尚东尚筑幼儿园: [113.411423, 22.94585],
        丽柏国际酒店: [113.345827, 23.142408],
        星河湾海怡半岛: [113.358611, 23.038033],
        "亚运城媒体村-南门": [113.483383, 22.948869],
        碧桂园东苑: [113.29299, 22.959408],
        祈福新村祈福名都: [113.328972, 22.970538],
        金山谷花园: [113.348779, 22.975133],
        祈福名都: [113.328972, 22.970538],
        人和: [113.302458, 23.341556],
        人和大街: [113.306869, 23.33824],
        null: [null, null],
        "保利·西海岸江岸花园(东南门)": [113.215869, 23.17634],
        "元邦·航空家园": [113.265436, 23.211099],
        南湖高尔夫俱乐部: [113.335771, 23.232485],
        南航明珠大酒店: [113.303794, 23.378089],
        心谊路: [113.263063, 23.175351],
        时代玫瑰园: [113.293132, 23.230737],
        同景花园: [113.242422, 23.172928],
        梅滨大厦: [113.332186, 23.185802],
        传统风味小笼包: [113.256819, 23.188598],
        贝丽花园: [113.263011, 23.18574],
        江高商业步行街: [113.239629, 23.280093],
        石潭路: [113.241677, 23.201995],
        "保利·西子湾": [113.217268, 23.153702],
        合和创意园: [113.288787, 23.232189],
        乐得花园: [113.281545, 23.228975],
        黄边: [113.291821, 23.228796],
        长发楼: [113.344586, 23.190699],
        黄石花园: [113.273512, 23.210873],
        白云尚城: [113.291617, 23.21967],
        广州市: [null, null],
        "锦尚·蓬莱": [113.243061, 23.396503],
        合和新城: [113.262946, 23.378914],
        合成村: [113.187905, 23.460768],
        雅宝新城英伦世家: [113.192758, 23.432713],
        自由人花园: [113.231329, 23.349813],
        南航花园: [113.23868, 23.407945],
        长岗村: [113.232763, 23.443317],
        中海花湾壹号: [113.245331, 23.074511],
        "丽枫酒店(上下九步行街店)": [113.254234, 23.120893],
        文昌南路: [113.250927, 23.122039],
        "新世界凯粤湾-东门": [113.221715, 23.120479],
        芦荻街: [113.25896, 23.133647],
        农林下路: [113.303804, 23.134868],
        华乐街华侨新村邻里活动中心: [113.295817, 23.143947],
        金羊花园: [113.315873, 23.132934],
        水均岗大院: [113.320347, 23.134897],
        水荫路: [113.317555, 23.150397],
        万艺国际精品广场: [113.27362, 23.122524],
        富力御龙庭: [113.301868, 23.148794],
        淘金路: [113.299932, 23.147272],
        东风东路: [113.325031, 23.133844],
        万科金色梦想: [113.535831, 23.170068],
        中海誉城: [113.530957, 23.168194],
        亨元花园: [113.54539, 23.100361],
        蓝玉五街: [113.533706, 23.062478],
        "中鼎·君和名城-西门": [113.46035, 23.114381],
        "保利林语山庄-南门": [113.459838, 23.185625],
        金碧世纪花园: [113.43589, 23.120518],
        万科城市花园: [113.473637, 23.11261]
      };

      var convertData = function(data) {
        var res = [];
        for (var i = 0; i < data.length; i++) {
          var geoCoord = geoCoordMap[data[i].name];
          if (geoCoord) {
            res.push({
              name: data[i].name,
              value: geoCoord.concat(data[i].value)
            });
          }
        }
        return res;
      };

      option = {
        title: {
          text: "新型冠状病毒阳性病人的分布（广州市）",
          subtext: "截止至 2020-02-02",
          sublink: "http://blog.yech.xyz",
          left: "right",
          textStyle: {
            fontSize: 30,
            color: "#292B2E"
          },
          subtextStyle: {
            fontSize: 25
          }
        },
        tooltip: {
          trigger: "item"
        },
        bmap: {
          center: [113.38, 23.1891],
          zoom: 12,
          roam: true,
          mapStyle: {
            styleJson: [
              {
                featureType: "water",
                elementType: "all",
                stylers: {
                  color: "#d1d1d1"
                }
              },
              {
                featureType: "land",
                elementType: "all",
                stylers: {
                  color: "#f3f3f3"
                }
              },
              {
                featureType: "railway",
                elementType: "all",
                stylers: {
                  visibility: "off"
                }
              },
              {
                featureType: "highway",
                elementType: "all",
                stylers: {
                  color: "#fdfdfd"
                }
              },
              {
                featureType: "highway",
                elementType: "labels",
                stylers: {
                  visibility: "off"
                }
              },
              {
                featureType: "arterial",
                elementType: "geometry",
                stylers: {
                  color: "#fefefe"
                }
              },
              {
                featureType: "arterial",
                elementType: "geometry.fill",
                stylers: {
                  color: "#fefefe"
                }
              },
              {
                featureType: "poi",
                elementType: "all",
                stylers: {
                  visibility: "off"
                }
              },
              {
                featureType: "green",
                elementType: "all",
                stylers: {
                  visibility: "off"
                }
              },
              {
                featureType: "subway",
                elementType: "all",
                stylers: {
                  visibility: "off"
                }
              },
              {
                featureType: "manmade",
                elementType: "all",
                stylers: {
                  color: "#d1d1d1"
                }
              },
              {
                featureType: "local",
                elementType: "all",
                stylers: {
                  color: "#d1d1d1"
                }
              },
              {
                featureType: "arterial",
                elementType: "labels",
                stylers: {
                  visibility: "off"
                }
              },
              {
                featureType: "boundary",
                elementType: "all",
                stylers: {
                  color: "#fefefe"
                }
              },
              {
                featureType: "building",
                elementType: "all",
                stylers: {
                  color: "#d1d1d1"
                }
              },
              {
                featureType: "label",
                elementType: "labels.text.fill",
                stylers: {
                  color: "#999999"
                }
              }
            ]
          }
        },
        series: [
          {
            name: "pm2.5",
            type: "scatter",
            coordinateSystem: "bmap",
            data: convertData(data),
            symbolSize: function(val) {
              return val[2] / 10;
            },
            label: {
              formatter: "{b}",
              position: "right",
              show: false
            },
            itemStyle: {
              color: "purple"
            },
            emphasis: {
              label: {
                show: true
              }
            }
          },
          {
            name: "病例：",
            type: "effectScatter",
            coordinateSystem: "bmap",
            data: convertData(
              data.sort(function(a, b) {
                return b.value - a.value;
              })
              //.slice(0, 100)
            ),
            symbolSize: function(val) {
              return val[2] / 10;
            },
            showEffectOn: "render",
            rippleEffect: {
              brushType: "stroke"
            },
            hoverAnimation: true,
            label: {
              formatter: "{b}",
              position: "right",
              show: true
            },
            itemStyle: {
              color: "purple",
              shadowBlur: 10,
              shadowColor: "#333"
            },
            zlevel: 1
          }
        ]
      };
      if (option && typeof option === "object") {
        myChart.setOption(option, true);
      }
    </script>
  </body>
</html>
